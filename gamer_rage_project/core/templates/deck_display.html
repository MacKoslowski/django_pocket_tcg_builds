{% load static %}
{% load core_tags %}

<!-- templates/core/components/deck_display.html -->
<div class="card h-100 deck-card" id="deck-{{ deck.deck_id }}" href="{ url core:deck_detail}">
    {% if deck.cover_card %}
        {% render_card deck.cover_card show_add_button=False deck=deck %}
    {% endif %}
    
    <div class="card-body">
        <h5 class="card-title">{{ deck.user_title }}</h5>
        <p class="card-text text-muted">{{ deck.user_description|truncatechars:100 }}</p>
        
        <!-- Deck Stats -->
        <div class="d-flex justify-content-between small text-muted mb-3">
            <span>
                <i class="fas fa-layer-group me-1"></i>
                {{ deck.card_count }} cards
            </span>
            <span>
                <i class="fas fa-palette me-1"></i>
                {{ deck.get_color_1_display }}
                {% if deck.color_2 %}
                / {{ deck.get_color_2_display }}
                {% endif %}
            </span>
        </div>

        <!-- Reactions Summary -->
        <div class="reactions-summary mb-3">
            <!-- Vote count -->
            <span class="me-3">
                <i class="fas fa-arrow-up text-success"></i>
                {{ deck.votes.all|length }}
            </span>
            
              <!-- Top reactions -->
              {% for reaction in top_reactions %}
                    <span class="me-2">{{ reaction.emoji }} {{ reaction.count }}</span>
                {% endfor %}
        </div>
    </div>

    <div class="card-footer bg-transparent">
        <div class="d-flex justify-content-between align-items-center">
            <small class="text-muted">
                By {{ deck.creator.username }}
            </small>
            <small class="text-muted">
                {{ deck.modified_at|timesince }} ago
            </small>
        </div>
        <a href="{% url 'core:deck_detail' deck.deck_id %}" class="btn btn-sm btn-primary">View</a>
    </div>
</div>